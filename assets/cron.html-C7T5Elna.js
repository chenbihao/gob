import{_ as n,c as a,o as s,b as e}from"./app-BBGivji7.js";const c={},i=e(`<h1 id="定时任务" tabindex="-1"><a class="header-anchor" href="#定时任务"><span>定时任务</span></a></h1><h2 id="指南" tabindex="-1"><a class="header-anchor" href="#指南"><span>指南</span></a></h2><p>相关的命令详见：<a href="../command/cron">cron</a></p><p>gob 中的定时任务是以命令的形式存在。gob 中也定义了一个命令 <code>./gob cron</code> 来对定时任务服务进行管理。</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token operator">&gt;</span> ./gob <span class="token function">cron</span></span>
<span class="line">定时任务相关命令</span>
<span class="line"></span>
<span class="line">Usage:</span>
<span class="line">  gob <span class="token function">cron</span> <span class="token punctuation">[</span>flags<span class="token punctuation">]</span></span>
<span class="line">  gob <span class="token function">cron</span> <span class="token punctuation">[</span>command<span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">Available Commands:</span>
<span class="line">  list        列出所有的定时任务</span>
<span class="line">  restart     重启cron常驻进程</span>
<span class="line">  start       启动cron常驻进程</span>
<span class="line">  state       cron常驻进程状态</span>
<span class="line">  stop        停止cron常驻进程</span>
<span class="line"></span>
<span class="line">Flags:</span>
<span class="line">  -h, <span class="token parameter variable">--help</span>   <span class="token builtin class-name">help</span> <span class="token keyword">for</span> <span class="token function">cron</span></span>
<span class="line"></span>
<span class="line">Use <span class="token string">&quot;gob cron [command] --help&quot;</span> <span class="token keyword">for</span> <span class="token function">more</span> information about a command.</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="创建" tabindex="-1"><a class="header-anchor" href="#创建"><span>创建</span></a></h1><p>创建一个定时任务和创建命令（command）是一致的。具体参考<a href="/command" target="_blank" rel="noopener noreferrer">command</a></p><h1 id="挂载" tabindex="-1"><a class="header-anchor" href="#挂载"><span>挂载</span></a></h1><p>和挂载命令稍微有些不同，使用的方法是 <code>AddCronCommand</code></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">rootCmd.AddCronCommand(&quot;* * * * *&quot;, command.DemoCommand)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h1 id="查询" tabindex="-1"><a class="header-anchor" href="#查询"><span>查询</span></a></h1><p>查询哪些定时任务挂载在服务上，使用命令 <code>./gob cron list</code></p><h1 id="启动" tabindex="-1"><a class="header-anchor" href="#启动"><span>启动</span></a></h1><p>使用命令 <code>./gob cron start</code> 启动一个定时服务</p><p>也可以通过 <code>./gob cron start -d</code> 使用 daemon 模式启动一个定时服务</p><p>定时服务的输出记录在 <code>/storage/log/cron.log</code></p><p>进程 id 记录在 <code>/storage/pid/app.pid</code></p><h1 id="状态" tabindex="-1"><a class="header-anchor" href="#状态"><span>状态</span></a></h1><p>使用 daemon 模式启动定时服务的时候，可以使用命令 <code>./gob cron state</code> 查询定时任务状态</p><h1 id="停止" tabindex="-1"><a class="header-anchor" href="#停止"><span>停止</span></a></h1><p>使用 daemon 模式启动定时服务的时候，可以使用命令 <code>./gob cron stop</code> 停止定时任务</p><h1 id="重启" tabindex="-1"><a class="header-anchor" href="#重启"><span>重启</span></a></h1><p>使用 daemon 模式启动定时服务的时候，可以使用命令 <code>./gob cron restart</code> 重启定时任务</p><blockquote><p>如果程序还未启动，调用 restart 命令，效果和 start 命令一样，daemon 模式启动定时服务</p></blockquote>`,24),l=[i];function o(d,p){return s(),a("div",null,l)}const t=n(c,[["render",o],["__file","cron.html.vue"]]),m=JSON.parse('{"path":"/guide/cron.html","title":"定时","lang":"zh-CN","frontmatter":{"lang":"zh-CN","title":"定时","description":null},"headers":[{"level":2,"title":"指南","slug":"指南","link":"#指南","children":[]}],"git":{"updatedTime":1718016868000,"contributors":[{"name":"被水淹没","email":"994523036@qq.com","commits":1},{"name":"陈壁浩","email":"chenbihao@qljy.com","commits":1}]},"filePathRelative":"guide/cron.md"}');export{t as comp,m as data};
